{% extends "enduser/base.html" %}
{% load static %}

{% block title %}Profile{% endblock %}

{% block content %}
    <div class="container">
        <header class="profile-header mb-4">
            {% if request.user.profile_photo_url %}
            <img src="{{ request.user.profile_photo_url }}" id="pro-pic" class="rounded-circle" width="40"
              height="40" style="object-fit: cover" alt="User profile photo" />
            {% else %}
            <div id="pro-pic" style="width: 60px; height: 60px; border-radius: 50%; object-fit: cover; margin: auto; display: flex; justify-content: center; align-items: center; font-size: 35px;" class="avatar-circle mb-3" aria-label="User initial avatar" role="img">
              {{request.user.first_name|default:request.user.username|slice:":1"|upper }}</div>
          {% endif %}
            <h1 id="username">{{request.user.first_name}} {{request.user.last_name}}</h1>
            <p id="email">{{request.user.email}}</p>
        </header>

        <nav class="profile-nav">
            <ul>
                <li><a href="/profile/" class="nav-active">Personal Info</a></li>
                <li><a href="/orders/">Order History</a></li>
                <li><a href="/cart/">Cart Items</a></li>
                <li><a href="/wishlist/">Wishlist</a></li>
                <li><a href="#">Settings</a></li>
            </ul>
        </nav>

        <main class="profile-content">
            <!-- Personal Info Section -->
            <section id="personal">
                <h2>Personal Information</h2>
                <form class="info-form" method="post">
                    {% csrf_token %}
                    <div class="form-group">
                        <label>First Name</label>
                        <input type="text" name="first_name" value="{{request.user.first_name}}">
                    </div>
                    <div class="form-group">
                        <label>Last Name</label>
                        <input type="text" name="last_name" value="{{request.user.last_name}}">
                    </div>
                    <div class="form-group">
                        <label>Email*</label>
                        <input type="email" value="{{request.user.email}}" readonly>
                    </div>
                    <div class="form-group">
                        <label>Phone</label>
                        <input type="tel" name="phone" value="{{request.user.phone|default:''}}">
                    </div>
                    <div class="form-group mb-3">
                        <label class="form-label">Address</label>
                        <textarea class="form-control" name="address" rows="3">{{request.user.address|default:''}}</textarea>
                    </div>
                    
                    <div class="form-group mb-3">
                        <label class="form-label">Gender</label>
                        <select class="form-select" name="gender">
                            <!-- options as shown above -->
                        </select>
                    </div>
                    <button type="submit">Save Changes</button>
                </form>
            </section>
        </main>
    </div>

    <script src="script.js"></script>

<style>
* { margin: 0; padding: 0; box-sizing: border-box; }
body { font-family: -apple-system, BlinkMacSystemFont, sans-serif; background: #f8f9fa; color: #333; }
.container { max-width: 800px; margin: 0 auto; padding: 20px; }

.profile-header { text-align: center; margin-bottom: 30px; }
.avatar { width: 100px; height: 100px; border-radius: 50%; object-fit: cover; margin-bottom: 10px; }
.profile-header h1 { font-size: 2em; margin-bottom: 5px; }
.profile-header p { color: #666; margin-bottom: 15px; }
.edit-btn { background: #007bff; color: white; border: none; padding: 10px 20px; border-radius: 5px; cursor: pointer; }

.profile-nav ul { display: flex; list-style: none; border-bottom: 2px solid #eee; overflow-x: auto; }
.profile-nav a { display: block; padding: 15px 20px; text-decoration: none; color: #666; border-bottom: 3px solid transparent; }
.profile-nav a.nav-active { color: #007bff; border-bottom-color: #007bff; }

.profile-content section { padding: 20px 0; }
.profile-content h2 { margin-bottom: 20px; }
.form-group { margin-bottom: 15px; }
.form-group label { display: block; margin-bottom: 5px; font-weight: bold; }
.form-group input { width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 5px; }
button[type="submit"], .add-btn { background: #28a745; color: white; border: none; padding: 10px 20px; border-radius: 5px; cursor: pointer; }

.orders-list, .address-list { display: flex; flex-direction: column; gap: 15px; }
.order-item, .address-item { background: white; padding: 20px; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1); display: flex; justify-content: space-between; align-items: center; }
.edit-small { background: #ffc107; color: #333; border: none; padding: 5px 10px; border-radius: 3px; cursor: pointer; }

.hidden { display: none; }

@media (max-width: 600px) {
    .container { padding: 10px; }
    .profile-nav ul { gap: 10px; }
    .order-item { flex-direction: column; align-items: flex-start; gap: 10px; }
}
</style>

{% endblock %}
