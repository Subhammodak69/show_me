{% extends "enduser/base.html" %}
{% load static %}

{% block title %}Cart | Show_me{% endblock %}

{% block content %}
<div class="container my-5"style="padding:10px !important;height: 100%;">
  <div class="row">
    <!-- Left: Cart Items -->
    <div class="col-md-8">
      <div class="mb-3 p-3 border rounded bg-white">
        <h5 class="mb-3">From Saved Addresses</h5>
        {% for item in cart_items %}
          <div class="d-flex border-bottom py-3 align-items-center">
            <div class="me-3" style="height:100px;">
              <img src="{{ item.product_item.photo_url }}" alt="{{ item.product_item.name }}" style="width: 100px; max-height:100%;">
            </div>
            <div class="flex-grow-1">
              <h6 class="mb-1" onclick="window.location.href='{% url 'product_details' item.product_item.id %}'" style="cursor: pointer;">
                {{ item.product_item.name }}
              </h6>

              <p class="mb-1">Size: {{ item.display_size }}</p>
              <p class="mb-1">Color: {{ item.display_color }}</p>

              {% if item.product_item.availibility == 0 %}
                <p class="text-danger fw-bold mb-2">Out Of Stock</p>
              {% endif %}

              <div>
                <a href="#" class="btn btn-sm btn-secondary me-3">SAVE FOR LATER</a>
                <a href="#" class="btn btn-sm btn-danger">REMOVE</a>
              </div>
            </div>
          </div>
        {% endfor %}
      </div>
    </div>

    <!-- Right: Price Summary -->
    <div class="col-md-4">
      <div class="border rounded bg-white p-3">
        <h6 class="fw-bold mb-3 text-muted">PRICE DETAILS</h6>
        <div class="d-flex justify-content-between mb-2">
          <span>Price ({{ total_items }} item{% if total_items > 1 %}s{% endif %})</span>
          <span>₹{{ price }}</span>
        </div>
        <div class="d-flex justify-content-between mb-2">
          <span>Discount</span>
          <span class="text-success">− ₹{{ discount }}</span>
        </div>
        <div class="d-flex justify-content-between mb-2">
          <span>Platform Fee</span>
          <span>₹{{ platform_fee }}</span>
        </div>
        <hr>
        <div class="d-flex justify-content-between mb-2 fw-bold">
          <span>Total Amount</span>
          <span>₹{{ total }}</span>
        </div>
        <p class="text-success mt-2">You will save ₹{{ discount }} on this order</p>
      </div>

      <div class="mt-3">
        <button class="btn btn-warning w-100 fw-bold" onclick="window.location.href='/order/create/'">PLACE ORDER</button>
      </div>
    </div>
  </div>
</div>
{% endblock %}
